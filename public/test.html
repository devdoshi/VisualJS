<html>
<head>
    <meta http-equiv="X-UA-Compatible"  content="IE=edge"                                                                                                                                                           />
    <meta name="viewport"               Content-Type="text/javascript; charset=utf-8" content="initial-scale=1.0, width=device-width, height=device-height, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="UTF-8"                                                                                                                                                                                           />

    <script src="https://unpkg.com/vue@3.4.21/dist/vue.global.js"></script>
    <scriptvc src="https://unpkg.com/@vue/compat@3.1"></scriptvc>
    <script     src="https://cdn.jsdelivr.net/npm/alasql@4">                                                                                                                                                        </script>



    <body>
        <div>
            Standard HTML and JS below
            <br>
            <b>HI THERE!</b>
        </div>

        <div style="margin-top:200px">
            Inside VueJS 2 below
            <div id="rootel"></div>
        </div>
    </body>



    <script>
        alasql("CREATE TABLE test (language INT, hello STRING)");
        alasql.fn.verify = function(r) {
            //debugger
            return true; // Do not insert on this number
        };
        alasql('CREATE TRIGGER mytrigger BEFORE INSERT ON test verify');

        alasql("INSERT INTO test VALUES (1,'Hello!')");
        alasql("INSERT INTO test VALUES (2,'Aloha!')");
        alasql("INSERT INTO test VALUES (3,'Bonjour!')");
        console.log( alasql("SELECT * FROM test WHERE language > 1") );

        alasql("create view testview (name) as select * from test ;")
        alasql.fn.verify2 = function(r) {
            debugger
            return true; // Do not insert on this number
        };
        alasql('CREATE TRIGGER mytrigger BEFORE INSERT ON testview verify2');
        console.log( alasql("SELECT * FROM testview ") );


        let vueApp = Vue.createApp(
                {
                    el: "#rootel",
                    template:   `
                        <div style="">
                            <br>
                                WE ARE IN THE MATRIX...
                                <br>
                                showItem := {{showItem}}
                                <div v-if='showItem'>
                                    <b><component v-bind:refresh='refresh' :is='"UserList"' ></component></b>
                                </div>
                                <br>
                                <button style="height: 050px;width:050px;" v-on:click="createItem()" >Create item</button>
                                <button style="height: 050px;width:050px;" v-on:click="showItemf()" >Show</button>
                                <button style="height: 050px;width:100px;" v-on:click="refreshAll()" >Refresh</button>
                        </div>`,
                    data: function() {
                        return {
                            refresh: 0,
                            showItem: true
                        }
                    },
                    mounted:    async function() {
                    },
                    methods: {
                        createItem: async function () {

                            vueApp.component("UserList",
                                {
                                    name: "UserList",
                                    template:   `
                                        <div style="margin-top: 70px;">
                                            <br>
                                                I am a component 5...
                                        </div>`
                                })
                            this.refresh ++
                            console.log("Loaded user component")
                        },
                        refreshAll: async function () {
                            this.refresh ++
                            console.log("Refreshed app")
                        },
                        showItemf: async function () {
                            this.showItem = true
                            console.log("Showed item")
                        }
                    }
                })

        setTimeout(async function() {
            //let vm = Vue.getCurrentInstance()
            //debugger
            //vueApp.refresh = 8
            vueApp.mount("#rootel")
            console.log("main app mounted")

        },100)

    </script>

</html>
