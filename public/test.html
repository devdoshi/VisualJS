<html>
<head>
    <meta http-equiv="X-UA-Compatible"  content="IE=edge"                                                                                                                                                           />
    <meta name="viewport"               Content-Type="text/javascript; charset=utf-8" content="initial-scale=1.0, width=device-width, height=device-height, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="UTF-8"                                                                                                                                                                                           />

    <script src="https://unpkg.com/@vue/compat@3.1"></script>



    <body>
        <div>
            Standard HTML and JS below
            <br>
            <b>HI THERE!</b>
        </div>

        <div style="margin-top:200px">
            Inside VueJS 2 below
            <div id="rootel"></div>
        </div>
    </body>



    <script>

        let vueApp = Vue.createApp(
                {
                    el: "#rootel",
                    template:   `
                        <div style="" v-bind:refresh='refresh'>
                            <br>
                                WE ARE IN THE MATRIX {{refresh}}...
                                <br>
                                showItem := {{showItem}}
                                <div v-if='showItem'>
                                    <b v-bind:refresh='refresh'><component v-bind:refresh='refresh' :is='"UserList"' ></component></b>
                                </div>
                                <br>
                                <button style="height: 050px;width:050px;" v-on:click="createItem()" >Create item</button>
                                <button style="height: 050px;width:050px;" v-on:click="showItemf()" >Show</button>
                                <button style="height: 050px;width:100px;" v-on:click="refreshAll()" >Refresh</button>
                        </div>`,
                    data: function() {
                        return {
                            refresh: 0,
                            showItem: false
                        }
                    },
                    mounted:    async function() {
                    },
                    methods: {
                        createItem: async function () {

                            vueApp.component("UserList",
                                {
                                    name: "UserList",
                                    template:   `
                                        <div style="margin-top: 70px;">
                                            <br>
                                                I am a component 5...
                                        </div>`,
                                    mounted:    function() {
                                        vueApp.refresh ++
                                    }
                                })
                            console.log("Loaded user component")
                        },
                        refreshAll: async function () {
                            vueApp.refresh ++
                            console.log("Refreshed app")
                        },
                        showItemf: async function () {
                            vueApp.showItem = true
                            console.log("Showed item")
                        }
                    }
                })

        setTimeout(async function() {
            //let vm = Vue.getCurrentInstance()
            //debugger
            //vueApp.refresh = 8
            vueApp.mount("#rootel")
            console.log("main app mounted")

        },100)

    </script>
</html>
